<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>com.gaic.bue.uwd</groupId>
    <artifactId>bom</artifactId>
    <version>2.3.3</version>
  </parent>

  <name>cube-impl</name>
  <groupId>com.gaic.bue.uwd</groupId>
  <artifactId>cube-impl</artifactId>
  <version>1.62.1-SNAPSHOT</version>
  <packaging>war</packaging>

  <properties>
   	<targetJdk>1.7</targetJdk>
    <version.cxf>2.4.3</version.cxf>
    <version.cube.common>1.57.4</version.cube.common>
    <version.cube.wsclients>1.39.0</version.cube.wsclients>
    <version.spring>3.1.1.RELEASE</version.spring>
  </properties>

    <scm>
        <url>https://github.gaig.com/CUBE/cube-impl</url>
        <connection>scm:git:ssh://git@cvgapgithub01/CUBE/cube-impl.git</connection>
        <developerConnection>scm:git:ssh://git@cvgapgithub01/CUBE/cube-impl.git</developerConnection>
    </scm>
  
  <build>
    <sourceDirectory>src/main/java</sourceDirectory>
    <testSourceDirectory>src/test/java</testSourceDirectory>
    <resources>
      <resource>
        <directory>src/main/resources</directory>
        <excludes>
          <exclude>**/*.java</exclude>
          <exclude>**/*.class</exclude>
        </excludes>
      </resource>
      <resource>
        <directory>src/main/java</directory>
        <excludes>
          <exclude>**/*.java</exclude>
          <exclude>**/*.class</exclude>
        </excludes>
      </resource>
    </resources>
    <testResources>
      <testResource>
      	<directory>src/test/java</directory>
        <excludes>
          <exclude>**/*.java</exclude>
          <exclude>**/*.class</exclude>
        </excludes>
      </testResource>
      <testResource>
        <directory>src/test/resources</directory>
        <excludes>
          <exclude>**/*.java</exclude>
          <exclude>**/*.class</exclude>
        </excludes>
      </testResource>
    </testResources>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.2</version>
        <configuration>
          <!-- Bind Groovy Eclipse Compiler -->
          <compilerId>groovy-eclipse-compiler</compilerId>
          <source>${targetJdk}</source>
          <target>${targetJdk}</target>
        </configuration>
        <dependencies>
          <dependency>
            <groupId>org.codehaus.groovy</groupId>
            <artifactId>groovy-eclipse-batch</artifactId>
            <!-- this version needs to match the version of groovy-all -->
            <version>2.3.4-01</version>
          </dependency>
          <!-- Define dependency to Groovy Eclipse Compiler (as it's referred in compilerId) -->
          <dependency>
            <groupId>org.codehaus.groovy</groupId>
            <artifactId>groovy-eclipse-compiler</artifactId>
            <version>2.9.0-01</version>
            <!-- 						<version>2.7.0-01</version> -->
          </dependency>
        </dependencies>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <configuration>
          <warSourceDirectory>src/main/webapp</warSourceDirectory>
          <packagingExcludes>**/*CprLocal.properties,**/log4j.xml,WEB-INF/lib/*.jar,WEB-INF/view/js/test/**,WEB-INF/view/test/**</packagingExcludes>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <configuration>
          <includes>
            <include>com/gaic/bue/uwd/ra/test/**/*.java</include>
            <!-- DO NOT ADD ANY MORE ENTRIES -->
          </includes>
          <excludes>
            <exclude>**/ExporterServiceTest.java</exclude>
            <!-- DO NOT REMOVE THESE ENTRIES -->
            <exclude>com/gaic/bue/uwd/ra/test_support/**/*.java</exclude>
            <exclude>com/gaic/bue/uwd/ra/dataaccess/**/*.java</exclude>
            <exclude>com/gaic/bue/uwd/ra/datasetmapper**/*.java</exclude>
          </excludes>
          <testFailureIgnore>false</testFailureIgnore>
          <argLine>-XX:MaxPermSize=512m -Xmx1024m</argLine>
        </configuration>
        <inherited>true</inherited>
  		</plugin>
		<plugin>
			<groupId>com.atlassian.maven.plugins</groupId>
			<artifactId>maven-clover2-plugin</artifactId>
			<configuration>
				<licenseLocation>${env.CLOVER_HOME}/clover.license</licenseLocation>
				<historyDir>${env.CLOVER_HOME}/history/${project.artifactId}</historyDir>
				<generateHistorical>true</generateHistorical>
				<includes>
					<include>**/*.java</include>
				</includes>
				<excludes>
					<exclude>**/web/**/*.java</exclude>
					<exclude>**/forms/*.java</exclude>
					<exclude>**/*Dto.java</exclude>
				</excludes>
			</configuration>
			<inherited>true</inherited>
		</plugin>
    </plugins>
  </build>

    <profiles>
    	<profile>
			<id>getSnapShot</id>
			<build>
				<plugins>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-antrun-plugin</artifactId>
						<executions>
							<execution>
								<id>initialize-client</id>
								<phase>generate-sources</phase>
								<configuration>
									<tasks>
										<property name="snapshot.dir" value="${basedir}/src/test/resources" />
										<property name="snapshot.user" value="snappy" />
										<property name="compile.classpath" refid="maven.compile.classpath" />
										<taskdef name="TakeSnapshot" classpathref="maven.compile.classpath" classname="com.gaic.bue.uwd.ra.test.util.TakeSnapshotAntTask" />
										<taskdef name="GetSnapshotResult" classpathref="maven.compile.classpath" classname="com.gaic.bue.uwd.ra.test.util.GetSnapshotResultAntTask" />
										<ant antfile="${basedir}/snapshotbuild.xml">
                 							 <target name="db-take-and-get-snapshot" />
               							</ant>
									</tasks>
								</configuration>
								<goals>
									<goal>run</goal>
								</goals>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
		 
    		<profile>
			<id>generate_ddl</id>
			<activation>
				<property>
					<name>executeDDLScripts</name>
					<value>true</value>
				</property>
			</activation>
			<properties>
				<com.gaic.uwd.ra.jdbc.driverClassName>oracle.jdbc.driver.OracleDriver</com.gaic.uwd.ra.jdbc.driverClassName>
				<com.gaic.uwd.ra.jdbc.url>jdbc:oracle:thin:@//dm01np-scan.td.afg:1521/dvlpr_udcubed.dev.gai.com</com.gaic.uwd.ra.jdbc.url>
				<com.gaic.uwd.ra.jdbc.settingsKey>dbunit-ra</com.gaic.uwd.ra.jdbc.settingsKey>
				<com.gaic.uwd.ra.build.schema.file>src/test/resources/buildTestSchema.sql</com.gaic.uwd.ra.build.schema.file>
			</properties>
			<build>
				<plugins>
					<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>sql-maven-plugin</artifactId>
						<version>1.4</version>
						
						<dependencies>
							<!-- oracle jdbc driver -->
                            <dependency>
                                <groupId>oracle</groupId>
                                <artifactId>ojdbc6</artifactId>
                                <version>${version.oracle}</version>
                            </dependency>
						</dependencies>
						
						<configuration>
							<driver>${com.gaic.uwd.ra.jdbc.driverClassName}</driver>
							<url>${com.gaic.uwd.ra.jdbc.url}</url>
							<settingsKey>${com.gaic.uwd.ra.jdbc.settingsKey}</settingsKey>
							<skip>false</skip>
							<keepFormat>true</keepFormat>
							<delimiter>/</delimiter>
							<escapeProcessing>false</escapeProcessing>
						</configuration>
						
						<executions>
							<execution>
								<id>db-pre-snapshot</id>
								<phase>process-resources</phase>
								<goals><goal>execute</goal></goals>
								<configuration>
									<srcFiles>
										<file>${com.gaic.uwd.ra.build.schema.file}</file>
									</srcFiles>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
 
   		<profile>
			<id>generate_ddl_local</id>
			<activation>
				<property>
					<name>executeDDLScriptsLocal</name>
					<value>false</value>
				</property>
			</activation>
			<properties>
				<com.gaic.uwd.ra.jdbc.driverClassName_local>oracle.jdbc.driver.OracleDriver</com.gaic.uwd.ra.jdbc.driverClassName_local>
                <com.gaic.uwd.ra.jdbc.url_local>jdbc:oracle:thin:@//dm01np-scan.td.afg:1521/dvlpr_udcubed.dev.gai.com</com.gaic.uwd.ra.jdbc.url_local>
				<com.gaic.uwd.ra.jdbc.settingsKey_local>dbunit-ra</com.gaic.uwd.ra.jdbc.settingsKey_local>
			</properties>
			<build>
				<plugins>
					<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>sql-maven-plugin</artifactId>
						<version>1.4</version>
						
						<dependencies>
                            <dependency>
                                <groupId>oracle</groupId>
                                <artifactId>ojdbc6</artifactId>
                                <version>${version.oracle}</version>
                            </dependency>
                        </dependencies>
						
						<configuration>
							<driver>${com.gaic.uwd.ra.jdbc.driverClassName_local}</driver>
							<url>${com.gaic.uwd.ra.jdbc.url_local}</url>
							<settingsKey>${com.gaic.uwd.ra.jdbc.settingsKey_local}</settingsKey>
							<skip>false</skip>
							<keepFormat>true</keepFormat>
							<delimiter>/</delimiter>
							<escapeProcessing>false</escapeProcessing>
						</configuration>
						
						<executions>
							<execution>
								<id>db-pre-snapshot</id>
								<phase>process-resources</phase>
								<goals><goal>execute</goal></goals>
								<configuration>
									<srcFiles>
										<file>src/test/resources/buildLocalTestSchemaFromRemoteDataBase.sql</file>
									</srcFiles>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
    </profiles>

  <dependencies>
    <dependency>
      <groupId>com.gaic.bue.uwd</groupId>
      <artifactId>cube-common</artifactId>
      <version>${version.cube.common}</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-webmvc</artifactId>
      <version>${version.spring}</version>
    </dependency>


    <dependency>
      <groupId>org.jvnet.jax-ws-commons.spring</groupId>
      <artifactId>jaxws-spring</artifactId>
      <version>1.9</version>
      <exclusions>
        <exclusion>
          <artifactId>spring-core</artifactId>
          <groupId>org.springframework</groupId>
        </exclusion>
        <exclusion>
          <artifactId>spring-beans</artifactId>
          <groupId>org.springframework</groupId>
        </exclusion>
        <exclusion>
          <artifactId>spring-web</artifactId>
          <groupId>org.springframework</groupId>
        </exclusion>
        <exclusion>
          <artifactId>spring-context</artifactId>
          <groupId>org.springframework</groupId>
        </exclusion>
        <exclusion>
          <artifactId>servlet-api</artifactId>
          <groupId>javax.servlet</groupId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
  		<groupId>org.reflections</groupId>
  		<artifactId>reflections-maven</artifactId>
    	<version>0.9.9-RC2</version>
    </dependency>
    <dependency>
      <groupId>com.gaic.bue.uwd</groupId>
      <artifactId>cube-ws-clients</artifactId>
      <version>${version.cube.wsclients}</version>
    </dependency>
	<dependency>
	  <groupId>org.opensymphony.quartz</groupId>
	  <artifactId>quartz</artifactId>
	  <version>1.6.5</version>
	</dependency>    
    <dependency>
      <groupId>commons-beanutils</groupId>
      <artifactId>commons-beanutils</artifactId>
      <version>1.8.3</version>
    </dependency>
    <dependency>
      <groupId>commons-io</groupId>
      <artifactId>commons-io</artifactId>
      <version>2.4</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-tx</artifactId>
      <version>${version.spring}</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-orm</artifactId>
      <version>${version.spring}</version>
    </dependency>
    <dependency>
      <groupId>org.codehaus.jackson</groupId>
      <artifactId>jackson-mapper-asl</artifactId>
      <version>1.9.0</version>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.7</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>com.gaic.security</groupId>
      <artifactId>esapi</artifactId>
      <version>1.2.10</version>
      <exclusions>
        <exclusion>
          <artifactId>commons-dbcp</artifactId>
          <groupId>commons-dbcp</groupId>
        </exclusion>
        <exclusion>
          <artifactId>axis-jaxrpc</artifactId>
          <groupId>org.apache.axis</groupId>
        </exclusion>
        <exclusion>
          <artifactId>ojdbc14</artifactId>
          <groupId>oracle</groupId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>cglib</groupId>
      <artifactId>cglib</artifactId>
      <version>3.1</version>
    </dependency>
    <dependency>
      <groupId>jaxen</groupId>
      <artifactId>jaxen</artifactId>
      <version>1.1.4</version>
    </dependency>
    <dependency>
      <groupId>org.apache.ant</groupId>
      <artifactId>ant</artifactId>
      <version>1.7.0</version>
    </dependency>
    <dependency>
      <groupId>org.dbunit</groupId>
      <artifactId>dbunit</artifactId>
      <version>2.4.9</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>legacy.interfaces</groupId>
      <artifactId>CommonUtil</artifactId>
      <version>1.4.3</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.poi</groupId>
      <artifactId>poi</artifactId>
      <version>3.10-FINAL</version>
    </dependency>
    <dependency>
      <groupId>org.apache.poi</groupId>
      <artifactId>poi-ooxml</artifactId>
      <version>3.10-FINAL</version>
    </dependency>
  </dependencies>

  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-c3p0</artifactId>
        <version>${version.hibernate}</version>
      </dependency>
      <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.6</version>
      </dependency>
      <dependency>
        <groupId>xerces</groupId>
        <artifactId>xercesImpl</artifactId>
        <version>2.10.0</version>
      </dependency>
      <dependency>
     	 <groupId>org.springframework</groupId>
    	  <artifactId>spring-beans</artifactId>
     	 <version>${version.spring}</version>
      </dependency>
      <dependency>
     	 <groupId>org.springframework</groupId>
    	  <artifactId>spring-web</artifactId>
     	 <version>${version.spring}</version>
      </dependency>
      <dependency>
     	 <groupId>org.springframework</groupId>
    	  <artifactId>spring-context-support</artifactId>
     	 <version>${version.spring}</version>
      </dependency>
      <dependency>
        <groupId>org.dbunit</groupId>
        <artifactId>dbunit</artifactId>
        <version>2.4.9</version>
      </dependency>
      <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.7.2</version>
      </dependency>
    </dependencies>
  </dependencyManagement>
</project>
